{% extends "base.html" %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload</title>
    <style>

    </style>
</head>
    <body>
            {% block content %}
            <div class="container">
                <h2 class="fw-bold">File Upload</h2>
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="file-category">Category:</label>
                                <select class="form-control" id="file-category" name="file-category" required>
                                    <option value="" disabled selected>Select Category</option>
                                </select>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="file-type">File Type:</label>
                                <select class="form-control" id="file-type" name="file-type" required>
                                    <option value="" disabled selected>Select Type</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label for="file-date">File Date:</label>
                                <input type="date" class="form-control" id="file-date" name="file-date" required>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="file">Choose File:</label>
                        <input type="file" class="form-control-file" id="file" name="file" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Upload</button>
                </form>
                {% if name %}
                    <p>{{ name }} uploded successfully!</p>
                {% endif %}
            {% endblock content %}
        </div>

        {% block extra_js %}
        <script>
            var categoryObject = {
                "Battery Module": ["Inlet", "Outlet", "Pump"],
                "Simulation": ["Type 1", "Type 2"]
            }
            window.onload = function() {
                var categorySel = document.getElementById("file-category");
                var typeSel = document.getElementById("file-type");
                for (var x in categoryObject) {
                    categorySel.options[categorySel.options.length] = new Option(x, x);
                }
                categorySel.onchange = function() {
                    //empty Type- dropdown
                    typeSel.length = 1;
                    //display correct values
                    var y = categoryObject[this.value]
                    for (var i = 0; i < y.length; i++) {
                        typeSel.options[typeSel.options.length] = new Option(y[i], y[i])
                    }
                }
            }
        </script>
        {% endblock extra_js %}
    </body>
</html>